name: app

type: dotnet:2.0-rc

relationships:
    database: "mysqldb:mysql"

web:
    locations:
        "/":
            allow: true
            scripts: false
            passthru: true
            root: "wwwroot"
    # commands:
    #    start: './WebApplication1'

hooks:
    build: |
        echo "Deploying to directory: $PLATFORM_OUTPUT_DIR"
        DOTNET_CLI_TELEMETRY_OPTOUT=1 strace dotnet publish --runtime noruntime-x64 --self-contained --output "$PLATFORM_OUTPUT_DIR"

disk: 256

mounts:
    "/storage": "shared:files/storage"
